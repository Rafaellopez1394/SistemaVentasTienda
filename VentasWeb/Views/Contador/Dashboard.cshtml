@{
    ViewBag.Title = "Dashboard Contador";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <h2><i class="fas fa-calculator"></i> Dashboard del Contador</h2>
            <p class="text-muted">Resumen ejecutivo de actividades contables y fiscales</p>
        </div>
    </div>

    <!-- Alertas -->
    <div id="alertasContainer" class="row mb-4">
        <!-- Las alertas se cargan dinámicamente -->
    </div>

    <!-- KPIs -->
    <div class="row mb-4">
        <!-- Facturas del Mes -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Facturas del Mes</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="kpiFacturasMes">0</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-file-invoice fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Total Facturado -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Total Facturado</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="kpiTotalFacturado">$0.00</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Nómina del Mes -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Nómina del Mes</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="kpiNominaMes">$0.00</div>
                            <small class="text-muted"><span id="kpiRecibosMes">0</span> recibos</small>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cuentas por Pagar -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Por Pagar</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="kpiPorPagar">$0.00</div>
                            <small class="text-muted"><span id="kpiCuentasPendientes">0</span> cuentas</small>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-exclamation-triangle fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Módulos de Configuración -->
    <div class="row">
        <div class="col-12">
            <h4 class="mb-3"><i class="fas fa-cogs"></i> Módulos de Configuración</h4>
        </div>
    </div>

    <div class="row">
        <!-- Configuración Empresa -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card shadow h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-building"></i> Datos de la Empresa</h5>
                </div>
                <div class="card-body">
                    <p>Configuración de datos fiscales, RFC, domicilio y régimen fiscal.</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> RFC y Razón Social</li>
                        <li><i class="fas fa-check text-success"></i> Domicilio Fiscal</li>
                        <li><i class="fas fa-check text-success"></i> Régimen Fiscal</li>
                        <li><i class="fas fa-check text-success"></i> Contacto</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="@Url.Action("ConfiguracionEmpresa", "Contador")" class="btn btn-primary btn-block">
                        <i class="fas fa-edit"></i> Configurar
                    </a>
                </div>
            </div>
        </div>

        <!-- Configuración Contable -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card shadow h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="fas fa-book"></i> Configuración Contable</h5>
                </div>
                <div class="card-body">
                    <p>Catálogo de cuentas, ejercicio fiscal y cuentas por defecto.</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Catálogo de Cuentas</li>
                        <li><i class="fas fa-check text-success"></i> Ejercicio Fiscal</li>
                        <li><i class="fas fa-check text-success"></i> Cuentas por Defecto</li>
                        <li><i class="fas fa-check text-success"></i> Pólizas Automáticas</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <div class="btn-group btn-block" role="group">
                        <a href="@Url.Action("ConfiguracionContable", "Contador")" class="btn btn-success">
                            <i class="fas fa-cog"></i> Config
                        </a>
                        <a href="@Url.Action("CatalogoCuentas", "Contador")" class="btn btn-outline-success">
                            <i class="fas fa-list"></i> Catálogo
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Configuración Nómina -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card shadow h-100">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-users-cog"></i> Configuración Nómina</h5>
                </div>
                <div class="card-body">
                    <p>Periodicidad, salarios, IMSS, percepciones y deducciones.</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Periodicidad</li>
                        <li><i class="fas fa-check text-success"></i> Salario Mínimo / UMA</li>
                        <li><i class="fas fa-check text-success"></i> Tablas IMSS/ISR</li>
                        <li><i class="fas fa-check text-success"></i> Percepciones/Deducciones</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="@Url.Action("ConfiguracionNomina", "Contador")" class="btn btn-info btn-block">
                        <i class="fas fa-edit"></i> Configurar
                    </a>
                </div>
            </div>
        </div>

        <!-- Configuración CFDI -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card shadow h-100">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="fas fa-file-invoice"></i> Configuración CFDI</h5>
                </div>
                <div class="card-body">
                    <p>PAC (Finkok), certificados CSD y series de facturas.</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Proveedor PAC</li>
                        <li><i class="fas fa-check text-success"></i> Series de Factura</li>
                        <li><i class="fas fa-check text-success"></i> Configuración Email</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="@Url.Action("ConfiguracionPAC", "Contador")" class="btn btn-warning text-dark btn-block">
                        <i class="fas fa-shield-alt"></i> Configurar
                    </a>
                </div>
            </div>
        </div>

        <!-- Certificados Digitales -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card shadow h-100">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0"><i class="fas fa-certificate"></i> Certificados Digitales</h5>
                </div>
                <div class="card-body">
                    <p>Gestión de certificados CSD/FIEL para timbrado y firma electrónica.</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Cargar .CER y .KEY</li>
                        <li><i class="fas fa-check text-success"></i> Validar Vigencia</li>
                        <li><i class="fas fa-check text-success"></i> Múltiples Certificados</li>
                        <li><i class="fas fa-check text-success"></i> Alertas de Vencimiento</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="@Url.Action("Certificados", "Contador")" class="btn btn-danger btn-block">
                        <i class="fas fa-upload"></i> Gestionar
                    </a>
                </div>
            </div>
        </div>

        <!-- Reportes Contables -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card shadow h-100">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="fas fa-chart-line"></i> Reportes Contables</h5>
                </div>
                <div class="card-body">
                    <p>Estados financieros y reportes fiscales.</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Estado de Resultados</li>
                        <li><i class="fas fa-check text-success"></i> Balance General</li>
                        <li><i class="fas fa-check text-success"></i> Flujo de Efectivo</li>
                        <li><i class="fas fa-check text-success"></i> Antigüedad de Saldos</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="@Url.Action("Index", "Reportes")" class="btn btn-secondary btn-block">
                        <i class="fas fa-chart-bar"></i> Ver Reportes
                    </a>
                </div>
            </div>
        </div>

        <!-- Pólizas Contables -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card shadow h-100">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0"><i class="fas fa-file-alt"></i> Pólizas Contables</h5>
                </div>
                <div class="card-body">
                    <p>Registro y consulta de pólizas contables del mes.</p>
                    <div class="text-center">
                        <h2 class="text-primary" id="kpiPolizasMes">0</h2>
                        <small class="text-muted">pólizas este mes</small>
                    </div>
                </div>
                <div class="card-footer">
                    <a href="@Url.Action("Index", "Polizas")" class="btn btn-dark btn-block">
                        <i class="fas fa-list"></i> Ver Pólizas
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/Scripts/Contador/Dashboard.js"></script>
}
