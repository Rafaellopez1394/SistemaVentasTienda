@{
    ViewBag.Title = "Proveedores";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="@Url.Action("Index","Home")">Inicio</a></li>
        <li class="breadcrumb-item active">Proveedores</li>
    </ol>
</nav>

<div class="card shadow">
    <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
        <h4 class="mb-0">Gestión de Proveedores</h4>
        <button class="btn btn-light btn-sm" onclick="abrirModal({})">
            <i class="fas fa-plus"></i> Nuevo Proveedor
        </button>
    </div>
    <div class="card-body">
        <table id="tbProveedores" class="table table-striped table-hover" style="width:100%">
            <thead class="thead-dark">
                <tr>
                    <th>RFC</th>
                    <th>Razón Social</th>
                    <th>Contacto</th>
                    <th>Teléfono</th>
                    <th>Banco</th>
                    <th>Tipo</th>
                    <th>Días Crédito</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<!-- Modal Proveedor -->
<div class="modal fade" id="modalProveedor" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Proveedor</h5>
                <button type="button" class="close text-white" data-dismiss="modal">×</button>
            </div>
            <div class="modal-body">
                <form id="formProveedor">
                    <input type="hidden" id="txtProveedorID" value="00000000-0000-0000-0000-000000000000" />

                    <div class="row">
                        <div class="col-md-4">
                            <label>RFC *</label>
                            <input type="text" class="form-control" id="txtRFC" maxlength="13" required />
                        </div>
                        <div class="col-md-8">
                            <label>Razón Social *</label>
                            <input type="text" class="form-control" id="txtRazonSocial" required />
                        </div>

                        <div class="col-md-4">
                            <label>Régimen Fiscal</label>
                            <select class="form-control" id="cboRegimenFiscal"></select>
                        </div>
                        <div class="col-md-4">
                            <label>Código Postal</label>
                            <input type="text" class="form-control" id="txtCodigoPostal" maxlength="5" />
                        </div>
                        <div class="col-md-4">
                            <label>Tipo Proveedor</label>
                            <select class="form-control" id="cboTipoProveedor"></select>
                        </div>

                        <div class="col-md-6">
                            <label>Nombre del Contacto</label>
                            <input type="text" class="form-control" id="txtContactoNombre" />
                        </div>
                        <div class="col-md-6">
                            <label>Correo del Contacto</label>
                            <input type="email" class="form-control" id="txtContactoCorreo" />
                        </div>
                        <div class="col-md-6">
                            <label>Teléfono del Contacto</label>
                            <input type="text" class="form-control" id="txtContactoTelefono" />
                        </div>

                        <hr class="my-3" />
                        <h6 class="text-primary">Datos Bancarios</h6>

                        <div class="col-md-4">
                            <label>Banco</label>
                            <select class="form-control" id="cboBanco"></select>
                        </div>
                        <div class="col-md-4">
                            <label>Número de Cuenta</label>
                            <input type="text" class="form-control" id="txtCuenta" />
                        </div>
                        <div class="col-md-4">
                            <label>CLABE</label>
                            <input type="text" class="form-control" id="txtCLABE" maxlength="18" />
                        </div>
                        <div class="col-md-6">
                            <label>Titular de la Cuenta</label>
                            <input type="text" class="form-control" id="txtTitularCuenta" />
                        </div>
                        <div class="col-md-3">
                            <label>Días de Crédito</label>
                            <input type="number" class="form-control" id="txtDiasCredito" min="0" />
                        </div>
                        <div class="col-md-9">
                            <label>Condiciones de Pago / Notas</label>
                            <textarea class="form-control" id="txtCondiciones" rows="2"></textarea>
                        </div>

                        <div class="col-md-4">
                            <label>Estatus</label>
                            <select class="form-control" id="cboEstatus">
                                <option value="1">Activo</option>
                                <option value="0">Inactivo</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-danger" onclick="Guardar()">Guardar Proveedor</button>
            </div>
        </div>
    </div>
</div>

<!-- Toast -->
<div class="position-fixed top-0 end-0 p-3" style="z-index: 9999;">
    <div id="liveToast" class="toast" role="alert">
        <div class="toast-header">
            <strong class="me-auto" id="toastTitulo">Notificación</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
        </div>
        <div class="toast-body" id="toastMensaje"></div>
    </div>
</div>

@section scripts {
    <script src="~/Scripts/Views/Proveedor.js"></script>
}